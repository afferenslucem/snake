{"version":3,"sources":["models/cell-direction.ts","app/hooks.ts","models/snake.ts","errors/game-over.ts","models/area.ts","components/Area/Field/field-slice.ts","components/Area/Cell/Cell.tsx","components/Area/Field/field.tsx","components/Area/Controller/Controller.tsx","components/Area/Field/game-slice.ts","app/store.ts","utils/game-runner.ts","utils/snake-controller.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["CellDirection","useAppSelector","useSelector","Snake","body","Up","nextDirection","this","headDirection","_","first","last","length","Down","Left","Right","isVertical","turnSnake","isHorizontal","append","toArray","turnedHead","turnHead","makeStep","skip","prepend","skipLast","direction","GameOver","message","Error","PositionComparator","second","entity","Area","height","width","args","snake","snakeCells","foodCells","snakePosition","rnd","Random","getSnakeCells","generateRandomFreeCell","nextCell","getNextSnakePosition","checkBounds","isSnakeCell","equals","snakeTail","move","isFoodCell","grow","where","cell","up","right","down","left","contains","next","position","x","y","coord","snakeNextDirection","coords","i","getNextSectionCoord","push","section","initialState","area","fieldSlice","createSlice","name","reducers","turnUp","state","turnRight","turnDown","turnLeft","tickField","tick","initField","actions","selectArea","field","selectIsSnakeCell","createSelector","selectIsFoodCell","Cell","props","isSnakeSelector","isFoodSelector","isSnake","cellIndex","rowIndex","isFood","cellClasses","classNames","className","renderArray","range","select","Field","map","row","renderRow","Controller","onMouseDown","bind","onMouseMove","onMouseUp","merge","fromEvent","document","subscribe","e","screenX","touches","screenY","setState","xDiff","yDiff","Math","abs","onLeftMove","onRightMove","onDownMove","onUpMove","onTouchStart","React","Component","gameSlice","started","speed","gameOver","startGame","changeSpeed","action","payload","endGame","selectGameStarted","game","selectGameOvered","store","configureStore","reducer","areaReducer","gameReducer","middleware","getDefaultMiddleware","serializableCheck","RunnerUtils","getState","selectLength","GameRunner","utils","defaultPeriod","period","repeater","dispatch","Repeater","iteration","start","selectSpeed","newSpeed","chooseSpeed","stop","pow","run","kill","SnakeController","moves$","keyPress$","controllerChange$","Subject","dead$","subscribeToKeys","pipe","distinctUntilChanged","takeUntil","item","key","complete","gameRunner","controller","App","useEffect","init","onClick","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.dc772c1a.chunk.js","sourcesContent":["export enum CellDirection {\n    Up = 'Up',\n    Right = 'Right',\n    Down = 'Down',\n    Left = 'Left',\n}\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { AppDispatch, RootState } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { CellDirection } from './cell-direction';\nimport _, { ISequence } from 'declarray';\n\nexport class Snake {\n    public readonly body: CellDirection[];\n\n    public constructor();\n    public constructor(body: CellDirection[]);\n    public constructor(body: CellDirection[], nextDirection: CellDirection);\n    public constructor(body: CellDirection[] = [CellDirection.Up], nextDirection?: CellDirection) {\n        this.body = body;\n        this.nextDirection = nextDirection || this.headDirection;\n    }\n\n    public readonly nextDirection: CellDirection;\n\n    public get headDirection(): CellDirection {\n        return _(this.body).first();\n    }\n\n    public get last(): CellDirection {\n        return _(this.body).last();\n    }\n\n    public get length(): number {\n        return this.body.length;\n    }\n\n    public get isVertical(): boolean {\n        return this.headDirection === CellDirection.Up || this.headDirection === CellDirection.Down;\n    }\n\n    public get isHorizontal(): boolean {\n        return this.headDirection === CellDirection.Left || this.headDirection === CellDirection.Right;\n    }\n\n    public up(): Snake {\n        if (this.isVertical && this.length > 1) {\n            return this;\n        } else return this.turnSnake(CellDirection.Up)\n    }\n\n    public right(): Snake {\n        if (this.isHorizontal && this.length > 1) {\n            return this;\n        } else return this.turnSnake(CellDirection.Right)\n    }\n\n    public down(): Snake {\n        if (this.isVertical && this.length > 1) {\n            return this;\n        } else return this.turnSnake(CellDirection.Down)\n    }\n\n    public left(): Snake {\n        if (this.isHorizontal && this.length > 1) {\n            return this;\n        } else return this.turnSnake(CellDirection.Left)\n    }\n\n    public grow(): Snake {\n        const newBody = _(this.body).append(this.last).toArray();\n        return new Snake(newBody);\n    }\n\n    public move(): Snake {\n        const turnedHead = this.turnHead()\n        const newBody = this.makeStep(turnedHead).toArray();\n        return new Snake(newBody);\n    }\n\n    private turnHead(): ISequence<CellDirection> {\n        return _(this.body).skip(1).prepend(this.nextDirection);\n    }\n\n    private makeStep(body: ISequence<CellDirection>): ISequence<CellDirection> {\n        return body.skipLast(1).prepend(this.nextDirection);\n    }\n\n    private turnSnake(direction: CellDirection): Snake {\n        return new Snake(this.body, direction);\n    }\n}\n","export class GameOver extends Error {\n    public constructor(message?: string) {\n        super(message);\n    }\n}\n","import { Snake } from './snake';\nimport { CellDirection } from './cell-direction';\nimport _, { IEqualityComparator } from 'declarray';\nimport { GameOver } from '../errors/game-over';\nimport { Random } from 'essents';\n\ndeclare type Position = [number, number];\n\ninterface AreaArgs {\n    snake?: Snake;\n    snakePosition?: Position;\n    foodCells?: Position[];\n}\n\nclass PositionComparator implements IEqualityComparator<Position> {\n    compare(first: Position, second: Position): number {\n        if (first[0] > second[0]) {\n            return 1;\n        } else if (first[0] < second[0]) {\n            return -1;\n        } else {\n            return first[1] - second[1];\n        }\n    }\n\n    equals(first: Position, second: Position): boolean {\n        return first[0] === second[0] && first[1] === second[1];\n    }\n\n    getHashCode(entity: Position): number {\n        return (entity[0] + 1024) * (entity[1] + 512)\n    }\n}\n\nexport class Area {\n    public readonly height: number;\n    public readonly width: number;\n\n    public readonly snake: Snake;\n\n    public readonly snakeCells: Position[];\n    public foodCells: Position[];\n\n    public readonly snakePosition: Position;\n\n    private readonly rnd: Random = new Random();\n\n    private get snakeNextDirection(): CellDirection {\n        return this.snake.nextDirection;\n    }\n    private get snakeTail(): Position {\n        return _(this.snakeCells).last();\n    }\n\n    public constructor(height: number, width: number);\n    public constructor(height: number, width: number, args: AreaArgs);\n    public constructor(height: number, width: number, args?: AreaArgs) {\n        this.height = height;\n        this.width = width;\n\n        this.snake = args?.snake ?? new Snake();\n        this.snakePosition = args?.snakePosition ?? [\n            (height / 2) | 0,\n            (width / 2) | 0,\n        ];\n\n        this.snakeCells = this.getSnakeCells();\n\n        this.foodCells = args?.foodCells?.length ? args.foodCells : [this.generateRandomFreeCell()];\n    }\n\n    public tick(): Area {\n        const nextCell = this.getNextSnakePosition();\n\n        if (!this.checkBounds(nextCell)) {\n            throw new GameOver('You break area beyond');\n        }\n\n        if (this.isSnakeCell(nextCell) && !new PositionComparator().equals(nextCell, this.snakeTail)) {\n            throw new GameOver('You did eat yourself');\n        }\n\n        let snake = this.snake;\n        snake = snake.move();\n\n        if (this.isFoodCell(nextCell)) {\n            snake = snake.grow();\n\n            this.foodCells = _(this.foodCells).where((cell) => !new PositionComparator().equals(nextCell, cell)).toArray();\n        }\n\n        return new Area(\n            this.height,\n            this.width,\n            {\n                snake: snake,\n                snakePosition: nextCell,\n                foodCells: this.foodCells,\n            }\n        )\n    }\n\n    public turnUp(): Area {\n        return new Area(\n            this.height,\n            this.width,\n            {\n                snake: this.snake.up(),\n                snakePosition: this.snakePosition,\n                foodCells: this.foodCells,\n            }\n        )\n    }\n\n    public turnRight(): Area {\n        return new Area(\n            this.height,\n            this.width,\n            {\n                snake: this.snake.right(),\n                snakePosition: this.snakePosition,\n                foodCells: this.foodCells,\n            }\n        )\n    }\n\n    public turnDown(): Area {\n        return new Area(\n            this.height,\n            this.width,\n            {\n                snake: this.snake.down(),\n                snakePosition: this.snakePosition,\n                foodCells: this.foodCells,\n            }\n        )\n    }\n\n    public turnLeft(): Area {\n        return new Area(\n            this.height,\n            this.width,\n            {\n                snake: this.snake.left(),\n                snakePosition: this.snakePosition,\n                foodCells: this.foodCells,\n            }\n        )\n    }\n\n    public isSnakeCell(cell: Position): boolean {\n        return  _(this.snakeCells).contains(cell, new PositionComparator());\n    }\n\n    public isFoodCell(cell: Position): boolean {\n        return  _(this.foodCells).contains(cell, new PositionComparator());\n    }\n\n    public generateRandomFreeCell(): Position {\n        let cell: Position = null;\n\n        do {\n            const x = this.rnd.next(this.width);\n            const y = this.rnd.next(this.height);\n\n            cell = [x, y];\n        } while (this.isSnakeCell(cell))\n\n        return cell;\n    }\n\n    public checkBounds(position: Position): boolean {\n        const [x, y] = position;\n        if (x < 0 || x >= this.width) {\n            return false;\n        } else if (y < 0 || y >= this.height) {\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    public getNextSnakePosition(): Position {\n        const coord = this.snakePosition;\n\n        switch (this.snakeNextDirection) {\n            case CellDirection.Up: return [coord[0], coord[1] - 1];\n            case CellDirection.Right: return [coord[0] + 1, coord[1]];\n            case CellDirection.Down: return [coord[0], coord[1] + 1];\n            case CellDirection.Left: return [coord[0] - 1, coord[1]];\n        }\n    }\n\n    public getSnakeCells(): Position[] {\n        const coords = [this.snakePosition];\n\n        let last = this.snakePosition;\n\n        for (let i = 1; i < this.snake.body.length; i++) {\n            last = this.getNextSectionCoord(last, this.snake.body[i]);\n            coords.push(last);\n        }\n\n        return coords;\n    }\n\n    private getNextSectionCoord(coord: Position, section: CellDirection): Position {\n        switch (section) {\n            case CellDirection.Up: return [coord[0], coord[1] + 1];\n            case CellDirection.Right: return [coord[0] - 1, coord[1]];\n            case CellDirection.Down: return [coord[0], coord[1] - 1];\n            case CellDirection.Left: return [coord[0] + 1, coord[1]];\n        }\n    }\n}\n","import { createSelector, createSlice } from '@reduxjs/toolkit';\nimport { RootState } from '../../../app/store';\nimport { Area } from '../../../models/area';\n\nexport interface FieldState {\n    area: Area,\n}\n\nconst initialState: FieldState = {\n    area: new Area(31, 31),\n};\n\n\n// Slice configuration\nexport const fieldSlice = createSlice({\n    name: 'field',\n    initialState,\n\n    reducers: {\n        turnUp: (state) => {\n            state.area = state.area.turnUp();\n        },\n        turnRight: (state) => {\n            state.area = state.area.turnRight();\n        },\n        turnDown: (state) => {\n            state.area = state.area.turnDown();\n        },\n        turnLeft: (state) => {\n            state.area = state.area.turnLeft();\n        },\n        tickField: (state) => {\n            state.area = state.area.tick();\n        },\n        initField: state => {\n            state.area = new Area(31, 31);\n        }\n    },\n});\n\n// Actions block\nexport const { turnUp, turnRight, turnDown, turnLeft, tickField, initField } = fieldSlice.actions;\n\n// Selectors\nexport const selectArea = (state: RootState) => state.field.area;\n\nexport const selectIsSnakeCell = createSelector(\n    selectArea,\n    (area: Area) => (position: [number, number]) => area.isSnakeCell(position)\n);\n\nexport const selectIsFoodCell = createSelector(\n    selectArea,\n    (area: Area) => (position: [number, number]) => area.isFoodCell(position)\n);\n\nexport default fieldSlice.reducer;\n","import React from 'react';\nimport { useAppSelector } from '../../../app/hooks';\nimport classNames from 'classnames';\nimport { selectIsFoodCell, selectIsSnakeCell } from '../Field/field-slice';\n\ninterface Props {\n    rowIndex: number;\n    cellIndex: number;\n}\n\nexport default function Cell(props: Props) {\n    const  isSnakeSelector = useAppSelector(selectIsSnakeCell);\n    const  isFoodSelector = useAppSelector(selectIsFoodCell);\n\n    const isSnake = isSnakeSelector([props.cellIndex, props.rowIndex]);\n    const isFood = isFoodSelector([props.cellIndex, props.rowIndex]);\n\n    const cellClasses = classNames({\n        'app-cell': true,\n        'snake-cell': isSnake,\n        'food-cell': isFood,\n    });\n\n    return (\n        <div className={cellClasses}> </div>\n    )\n}\n","import React from 'react';\nimport _ from 'declarray';\nimport Cell from '../Cell/Cell';\nimport './field.scss';\n\nconst renderArray = _.range(0, 30).select(() => _.range(0, 30).toArray()).toArray();\n\nfunction renderRow(row: Array<any>, rowIndex: number) {\n    return row.map((cell, cellIndex) => (\n        <Cell rowIndex={rowIndex} cellIndex={cellIndex}/>\n    ));\n}\n\nexport default function Field() {\n    return (\n        <div className=\"app-field\">\n            {\n                renderArray.map((row, rowIndex) => renderRow(row, rowIndex))\n            }\n        </div>\n    )\n}\n","import React from 'react';\nimport './Controller.scss';\nimport classNames from 'classnames';\nimport { fromEvent, merge } from 'rxjs';\n\ninterface State {\n    x: number;\n    y: number;\n    direction: string;\n}\n\ninterface Props {\n    onUpMove: () => void;\n    onRightMove: () => void;\n    onDownMove: () => void;\n    onLeftMove: () => void;\n}\n\nexport default class Controller extends React.Component<Props, State> {\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            x: null,\n            y: null,\n            direction: null,\n        }\n\n        this.onMouseDown = this.onMouseDown.bind(this);\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onMouseUp = this.onMouseUp.bind(this);\n    }\n\n    public componentDidMount() {\n        merge(\n            fromEvent(document, 'mouseup'),\n            fromEvent(document, 'touchend'),\n        ).subscribe((e) => this.onMouseUp());\n\n        merge(\n            fromEvent(document, 'mousemove'),\n            fromEvent(document, 'touchmove'),\n        ).subscribe((e) => this.onMouseMove(e as any));\n    }\n\n    public onMouseDown(e: any) {\n        const x = e.screenX ?? e.touches[0].screenX\n        const y = e.screenY ?? e.touches[0].screenY\n\n        this.setState(() => ({ x, y }))\n    }\n\n    public onMouseMove(e: any) {\n        const { x, y } = this.state;\n\n        if (!x || !y) return;\n\n        const screenX = e.screenX ?? e.touches[0].screenX\n        const screenY = e.screenY ?? e.touches[0].screenY\n\n        const xDiff = x - screenX;\n        const yDiff = y - screenY;\n\n        if (Math.abs(xDiff) > Math.abs(yDiff) && xDiff > 0) {\n            this.props.onLeftMove();\n            this.setState(() => ({ direction: 'left' }));\n        } else if (Math.abs(xDiff) > Math.abs(yDiff) && xDiff < 0) {\n            this.props.onRightMove();\n            this.setState(() => ({ direction: 'right' }));\n        } else if (Math.abs(xDiff) < Math.abs(yDiff) && yDiff < 0) {\n            this.props.onDownMove();\n            this.setState(() => ({ direction: 'down' }));\n        } else if (Math.abs(xDiff) < Math.abs(yDiff) && yDiff > 0) {\n            this.props.onUpMove();\n            this.setState(() => ({ direction: 'up' }));\n        }\n    }\n\n    public onMouseUp() {\n        this.setState(() => ({ x: null, y: null, direction: null }))\n    }\n\n    render() {\n        return (\n            <div\n                className={classNames(\"app-controller\", this.state.direction)}\n            >\n                <div className=\"app-controller__top arrow control\"> </div>\n                <div className=\"app-controller__right arrow control\"> </div>\n                <div className=\"app-controller__bottom arrow control\"> </div>\n                <div className=\"app-controller__left arrow control\"> </div>\n                <div className=\"app-controller__cursor-placeholder\">\n                    <div className=\"app-controller__cursor control\"\n                         onMouseDown={this.onMouseDown}\n                         onTouchStart={this.onMouseDown}\n                    > </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../../../app/store';\n\nexport interface GameState {\n    started: boolean,\n    speed: number,\n    gameOver: string,\n}\n\nconst initialState: GameState = {\n    started: false,\n    speed: null,\n    gameOver: null,\n};\n\nexport const gameSlice = createSlice({\n    name: 'game',\n    initialState,\n\n    reducers: {\n        startGame: (state) => {\n            state.started = true;\n            state.speed = 1;\n            state.gameOver = null;\n        },\n        changeSpeed: (state, action: PayloadAction<number>) => {\n            state.speed = action.payload;\n        },\n        endGame: (state, action: PayloadAction<string>) => {\n            state.started = false;\n            state.speed = null;\n            state.gameOver = action.payload;\n        },\n    },\n});\n\n// Actions block\nexport const { startGame, changeSpeed, endGame } = gameSlice.actions;\n\nexport const selectGameStarted = (state: RootState) => state.game.started;\n\nexport const selectGameOvered = (state: RootState) => state.game.gameOver;\n\nexport const selectSpeed = (state: RootState) => state.game.started;\n\nexport default gameSlice.reducer;\n","import { Action, configureStore, ThunkAction } from '@reduxjs/toolkit';\nimport areaReducer from '../components/Area/Field/field-slice';\nimport gameReducer from '../components/Area/Field/game-slice';\n\nexport const store = configureStore({\n  reducer: {\n    field: areaReducer,\n    game: gameReducer,\n  },\n  middleware: getDefaultMiddleware => getDefaultMiddleware({\n    serializableCheck: false,\n  })\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import { store } from '../app/store';\nimport { Repeater } from 'essents';\nimport { initField, tickField } from '../components/Area/Field/field-slice';\nimport { GameOver } from '../errors/game-over';\nimport { endGame, startGame } from '../components/Area/Field/game-slice';\n\nexport class RunnerUtils {\n    public selectLength(): number {\n        return store.getState().field.area.snake.body.length;\n    }\n\n    public selectSpeed(): number {\n        return store.getState().game.speed;\n    }\n\n    public chooseSpeed() {\n        const length = this.selectLength();\n\n        return 1 + ((length / 4) | 0);\n    }\n}\n\nexport class GameRunner {\n    public utils: RunnerUtils = new RunnerUtils();\n\n    public readonly defaultPeriod = 750;\n\n    public period: number = null;\n\n    public repeater: Repeater = null;\n\n    public init(): void {\n        store.dispatch(initField())\n    }\n\n    public run(): void {\n        store.dispatch(startGame())\n        this.repeater = new Repeater(() => this.iteration(), this.period ?? this.defaultPeriod).start();\n    }\n\n    public iteration(): void {\n        const speed = this.utils.selectSpeed();\n        const newSpeed = this.utils.chooseSpeed();\n\n        if (speed !== newSpeed) {\n            this.changeSpeed(newSpeed);\n        }\n\n        try {\n            store.dispatch(tickField())\n        } catch (e) {\n            if (e instanceof GameOver) {\n                store.dispatch(endGame(e.message));\n                this.stop();\n            }\n        }\n    }\n\n    public changeSpeed(newSpeed: number): void {\n        this.stop()\n\n        this.period = Math.pow(0.9, newSpeed) * this.defaultPeriod;\n\n        this.run();\n    }\n\n    public stop(): void {\n        this.repeater.kill();\n    }\n}\n","import { fromEvent, merge, Observable, Subject } from 'rxjs';\nimport { CellDirection } from '../models/cell-direction';\nimport { distinctUntilChanged, map, takeUntil } from 'rxjs/operators';\nimport { turnDown, turnLeft, turnRight, turnUp } from '../components/Area/Field/field-slice';\nimport { store } from '../app/store';\n\nexport class SnakeController {\n    public moves$: Observable<CellDirection>;\n\n    private keyPress$: Observable<CellDirection>;\n    private controllerChange$ = new Subject<CellDirection>();\n\n    private dead$ = new Subject<void>();\n\n    public init(): void {\n        this.keyPress$ = this.subscribeToKeys();\n\n        this.moves$ = merge(\n            this.keyPress$,\n            this.controllerChange$\n        ).pipe(\n            distinctUntilChanged((first, second) => first === second),\n            takeUntil(this.dead$),\n        )\n\n        this.moves$.subscribe((direction: CellDirection) => {\n            switch (direction) {\n                case CellDirection.Up: {\n                    store.dispatch(turnUp());\n                    break;\n                }\n                case CellDirection.Down: {\n                    store.dispatch(turnDown());\n                    break;\n                }\n                case CellDirection.Right: {\n                    store.dispatch(turnRight());\n                    break;\n                }\n                case CellDirection.Left: {\n                    store.dispatch(turnLeft());\n                    break;\n                }\n            }\n        });\n    }\n\n    private subscribeToKeys(): Observable<CellDirection> {\n        return fromEvent<KeyboardEvent>(document, 'keydown').pipe(\n            map(item => item.key),\n            map(item => {\n                switch (item) {\n                    case \"ArrowUp\":\n                        return CellDirection.Up;\n                    case \"ArrowDown\":\n                        return CellDirection.Down;\n                    case \"ArrowRight\":\n                        return CellDirection.Right;\n                    case \"ArrowLeft\":\n                        return CellDirection.Left;\n                }\n            }),\n        );\n    }\n\n    public turnUp(): void {\n        this.controllerChange$.next(CellDirection.Up)\n    }\n\n    public turnRight(): void {\n        this.controllerChange$.next(CellDirection.Right)\n    }\n\n    public turnDown(): void {\n        this.controllerChange$.next(CellDirection.Down)\n    }\n\n    public turnLeft(): void {\n        this.controllerChange$.next(CellDirection.Left)\n    }\n\n    public unsubscribe(): void {\n        this.dead$.next();\n        this.dead$.complete();\n    }\n}\n","import React, { useEffect } from 'react';\nimport Field from './components/Area/Field/field';\nimport { useAppSelector } from './app/hooks';\nimport Controller from './components/Area/Controller/Controller';\nimport { selectGameOvered, selectGameStarted } from './components/Area/Field/game-slice';\nimport { GameRunner } from './utils/game-runner';\nimport { SnakeController } from './utils/snake-controller';\n\nconst gameRunner = new GameRunner();\nconst controller = new SnakeController();\n\nfunction App() {\n    useEffect(() => {\n        controller.init();\n    })\n\n    const started = useAppSelector(selectGameStarted);\n    const gameOver = useAppSelector(selectGameOvered);\n    return (\n        <div className=\"App\">\n            <Field/>\n            {\n                !started ? (\n                    <button\n                        className=\"start-game\"\n                        onClick={() => {\n                            gameRunner.init();\n                            gameRunner.run();\n                        }}\n                    >\n                        Start\n                    </button>\n                ) : (\n                    <Controller\n                        onUpMove={() => controller.turnUp()}\n                        onRightMove={() => controller.turnRight()}\n                        onDownMove={() => controller.turnDown()}\n                        onLeftMove={() => controller.turnLeft()}\n                    />\n                )\n            }\n            {\n                gameOver ?\n                    <span>{gameOver}</span> :\n                    null\n            }\n        </div>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles.scss';\nimport App from './App';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n        <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}